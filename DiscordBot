import discord
import requests
import os
import asyncio

# Replace these with your own values
DISCORD_TOKEN = 'MTM0NjU4NjMyMzYyNDAwMTU5Nw.Gf3ILD.X9V6D2rH7YU7cA4p8R_k2gyeHBTIJUJIKmTLsA'
TWITCH_CHANNEL_ID = '192425009'
YOUTUBE_CHANNEL_ID = 'UCQa0xo_y0L1GuI7cunr4AEA'
DISCORD_CHANNEL_ID = '1179212790490218587'
ROLE_ID = '1277604664698736742'

client = discord.Client()

def check_twitch():
    url = f'https://api.twitch.tv/helix/streams?user_id={TWITCH_CHANNEL_ID}'
    headers = {
        'Client-ID': 'YOUR_TWITCH_CLIENT_ID',
        'Authorization': 'Bearer YOUR_TWITCH_ACCESS_TOKEN'
    }
    response = requests.get(url, headers=headers)
    data = response.json()
    return data['data']

def check_youtube():
    url = f'https://www.googleapis.com/youtube/v3/search?key=YOUR_YOUTUBE_API_KEY&channelId={YOUTUBE_CHANNEL_ID}&part=snippet,id&order=date&maxResults=1'
    response = requests.get(url)
    data = response.json()
    return data['items']

async def check_updates():
    await client.wait_until_ready()
    channel = client.get_channel(DISCORD_CHANNEL_ID)
    
    while not client.is_closed():
        twitch_data = check_twitch()
        if twitch_data:
            await channel.send(f'{twitch_data[0]["user_name"]} is live on Twitch: {twitch_data[0]["title"]} - {twitch_data[0]["url"]}')
        
        youtube_data = check_youtube()
        if youtube_data:
            await channel.send(f'New YouTube video: {youtube_data[0]["snippet"]["title"]} - https://www.youtube.com/watch?v={youtube_data[0]["id"]["videoId"]}')
        
        await asyncio.sleep(45)  # Wait for 45 seconds before checking again

@client.event
async def on_ready():
    print(f'Logged in as {client.user}')
    client.loop.create_task(check_updates())

client.run(DISCORD_TOKEN)
